!function(e){function n(n){for(var r,o,c=n[0],s=n[1],l=n[2],u=0,m=[];u<c.length;u++)o=c[u],a[o]&&m.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(d&&d(n);m.length;)m.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,c=1;c<t.length;c++){var s=t[c];0!==a[s]&&(r=!1)}r&&(i.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},a={0:0},i=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var d=s;i.push([8,1]),t()}([,function(e){e.exports={1:"應課稅品稅項",2:"一般差餉",3:"內部稅收",4:"車輛稅",5:"罰款、沒收及罰金",6:"專利稅及特權稅",7:"物業及投資",9:"貸款、償款、供款及其他收入",10:"公用事業",11:"各項收費",21:"行政長官辦公室",22:"漁農自然護理署",23:"醫療輔助隊",24:"審計署",25:"建築署",26:"政府統計處",27:"民眾安全服務處",28:"民航處",30:"懲教署",31:"香港海關",33:"土木工程拓展署",37:"衞生署",39:"渠務署",42:"機電工程署",44:"環境保護署",45:"消防處",46:"公務員一般開支",47:"政府總部：政府資訊科技總監辦公室",48:"政府化驗所",49:"食物環境衞生署",51:"政府產業署",53:"政府總部：民政事務局",55:"政府總部：商務及經濟發展局(通訊及創意產業科)",59:"政府物流服務署",60:"路政署",62:"房屋署",63:"民政事務總署",70:"入境事務處",72:"廉政公署",74:"政府新聞處",76:"稅務局",78:"知識產權署",79:"投資推廣署",80:"司法機構",82:"屋宇署",90:"勞工處",91:"地政總署",92:"律政司",94:"法律援助署",95:"康樂及文化事務署",96:"政府總部：海外經濟貿易辦事處",100:"海事處",106:"雜項服務",112:"立法會行政管理委員會",114:"申訴專員公署",116:"破產管理署",118:"規劃署",120:"退休金",121:"獨立監察警方處理投訴委員會",122:"香港警務處",135:"政府總部：創新及科技局",136:"公務員敍用委員會秘書處",137:"政府總部：環境局",138:"政府總部：發展局(規劃地政科)",139:"政府總部：食物及衞生局(食物科)",140:"政府總部：食物及衞生局(衞生科)",141:"政府總部：勞工及福利局",142:"政府總部：政務司司長辦公室及財政司司長辦公室",143:"政府總部：公務員事務局",144:"政府總部：政制及內地事務局",147:"政府總部：財經事務及庫務局(庫務科)",148:"政府總部：財經事務及庫務局(財經事務科)",151:"政府總部：保安局",152:"政府總部：商務及經濟發展局(工商及旅遊科)",155:"政府總部：創新科技署",156:"政府總部：教育局",158:"政府總部：運輸及房屋局(運輸科)",159:"政府總部：發展局(工務科)",160:"香港電台",162:"差餉物業估價署",163:"選舉事務處",166:"政府飛行服務隊",168:"香港天文台",169:"截取通訊及監察事務專員秘書處",170:"社會福利署",173:"在職家庭及學生資助事務處",174:"公務及司法人員薪俸及服務條件諮詢委員會聯合秘書處",180:"電影、報刊及物品管理辦事處",181:"工業貿易署",184:"轉撥各基金的款項",186:"運輸署",188:"庫務署",190:"大學教育資助委員會",194:"水務署",701:"土地徵用",702:"港口及機場發展",703:"建築物",704:"渠務",705:"土木工程",706:"公路",707:"新市鎮及市區發展",708:"非經常資助金及主要系統設備",709:"水務",710:"電腦化計劃",711:"房屋"}},function(e){e.exports={1:"Duties",2:"General Rates",3:"Internal Revenue",4:"Motor Vehicle Taxes",5:"Fines",6:"Royalties and Concessions",7:"Properties and Investments",9:"Loans",10:"Utilities",11:"Fees and Charges",21:"Chief Executive's Office",22:"Agriculture",23:"Auxiliary Medical Service",24:"Audit Commission",25:"Architectural Services Department",26:"Census and Statistics Department",27:"Civil Aid Service",28:"Civil Aviation Department",30:"Correctional Services Department",31:"Customs and Excise Department",33:"Civil Engineering and Development Department",37:"Department of Health",39:"Drainage Services Department",42:"Electrical and Mechanical Services Department",44:"Environmental Protection Department",45:"Fire Services Department",46:"General Expenses of the Civil Service",47:"Government Secretariat: Office of the Government Chief Information Officer",48:"Government Laboratory",49:"Food and Environmental Hygiene Department",51:"Government Property Agency",53:"Government Secretariat: Home Affairs Bureau",55:"Government Secretariat: Commerce and Economic Development Bureau (Communications and Creative Industries Branch)",59:"Government Logistics Department",60:"Highways Department",62:"Housing Department",63:"Home Affairs Department",70:"Immigration Department",72:"Independent Commission Against Corruption",74:"Information Services Department",76:"Inland Revenue Department",78:"Intellectual Property Department",79:"Invest Hong Kong",80:"Judiciary",82:"Buildings Department",90:"Labour Department",91:"Lands Department",92:"Department of Justice",94:"Legal Aid Department",95:"Leisure and Cultural Services Department",96:"Government Secretariat: Overseas Economic and Trade Offices",100:"Marine Department",106:"Miscellaneous Services",112:"Legislative Council Commission",114:"Office of The Ombudsman",116:"Official Receiver's Office",118:"Planning Department",120:"Pensions",121:"Independent Police Complaints Council",122:"Hong Kong Police Force",135:"Government Secretariat: Innovation and Technology Bureau",136:"Public Service Commission Secretariat",137:"Government Secretariat: Environment Bureau",138:"Government Secretariat: Development Bureau (Planning and Lands Branch)",139:"Government Secretariat: Food and Health Bureau (Food Branch)",140:"Government Secretariat: Food and Health Bureau (Health Branch)",141:"Government Secretariat: Labour and Welfare Bureau",142:"Government Secretariat: Offices of the Chief Secretary for Administration and the Financial Secretary",143:"Government Secretariat: Civil Service Bureau",144:"Government Secretariat: Constitutional and Mainland Affairs Bureau",147:"Government Secretariat: Financial Services and the Treasury Bureau (The Treasury Branch)",148:"Government Secretariat: Financial Services and the Treasury Bureau (Financial Services Branch)",151:"Government Secretariat: Security Bureau",152:"Government Secretariat: Commerce and Economic Development Bureau (Commerce",155:"Government Secretariat: Innovation and Technology Commission",156:"Government Secretariat: Education Bureau",158:"Government Secretariat: Transport and Housing Bureau (Transport Branch)",159:"Government Secretariat: Development Bureau (Works Branch)",160:"Radio Television Hong Kong",162:"Rating and Valuation Department",163:"Registration and Electoral Office",166:"Government Flying Service",168:"Hong Kong Observatory",169:"Secretariat",170:"Social Welfare Department",173:"Working Family and Student Financial Assistance Agency",174:"Joint Secretariat for the Advisory Bodies on Civil Service and Judicial Salaries and Conditions of Service",180:"Office for Film",181:"Trade and Industry Department",184:"Transfers to Funds",186:"Transport Department",188:"Treasury",190:"University Grants Committee",194:"Water Supplies Department",701:"Land Acquisition",702:"Port and Airport Development",703:"Buildings",704:"Drainage",705:"Civil Engineering",706:"Highways",707:"New Towns and Urban Area Development",708:"Capital Subventions and Major Systems and Equipment",709:"Waterworks",710:"Computerisation",711:"Housing"}},function(e,n,t){var r=t(4);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(6)(r,a);r.locals&&(e.exports=r.locals)},function(e,n,t){(e.exports=t(5)(!1)).push([e.i,"* {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\n\n.tooltip{\n    position: absolute;\n    text-align: left;\n    z-index: 999;\n    visibility: hidden;\n    color: white;\n    padding: 9px;\n    background-color: rgba(0, 0, 0, 0.75);\n    border-radius: 6px;\n    font: 12px sans-serif;\n}\n\n.screen-size-reminder {\n    display: flex;\n    text-align: center;\n    justify-content: center;\n}\n.screen-size-reminder p{\n    flex:100%;\n    font-size: 17px;\n    color: white;\n    font-weight: 600;\n}\n\n.chart-container, .chart-container h3{\n    display: none;\n}\n\n#head{\n    position:sticky;\n    top: 30px;\n    text-align: center\n}\n\n#toolbar {\n    display: none;\n    position: sticky;\n    top: 0;\n}\nbutton {\n    z-index: 1;\n}\n#legend{\n    float: right;\n    position: sticky;\n    top:0;\n    right: 50px;\n}\n#legend-des, #legend-item{\n    display: block;\n}\n\n#legend-item p, #legend-item span{\n    display: inline-block;\n}\n.legend-bubble{\n    width: 15px;\n    height: 15px;\n    border-radius: 50%\n}\n#legend-des{\n    color: rgba(200, 200, 200, 0.75);\n}\n#legend0{\n    background-color:rgba(200, 200, 200, 0.5)\n}\n#legend1{\n    background-color: rgba(30, 30, 255, 0.5)\n}\n#legend2{\n    background-color: rgb(0, 0, 0)\n}\n\nbody{\n    background: linear-gradient(to bottom right, rgba(102, 153, 255, 0.5), rgba(102, 102, 255, 0.5))\n}\n\n@media only screen and (min-width: 1024px){\n    .screen-size-reminder {\n        display: none;\n    }\n    .chart-container, .chart-container h3, #toolbar{\n        display: block;\n    }\n    body{\n        background: none;\n    }\n}",""])},,,,function(e,n,t){"use strict";t.r(n);t(3);var r=t(0);var a=(e,n)=>{const t=r.g(e=>n(e.Budget)<40?-250:250).strength(e=>n(e.Budget)<40?.01:.05),a=r.h().strength(e=>n(e.Budget)<40?.01:.05);e.force("y",a),e.force("x",t).alphaTarget(.3).restart()};const i=e=>{const n=[];return e.map(e=>{n.indexOf(e.Head)<0&&n.push(e.Head)}),n};var o=(e,n)=>{const t=i(e),a=r.g(e=>t.indexOf(e.Head)/10*110-450).strength(.06),o=r.h(e=>t.indexOf(e.Head)%10*100-350).strength(.06);n.force("y",o),n.force("x",a).alphaTarget(.6).restart()};var c=(e,n)=>{const t=r.g(0).strength(0),a=r.h(0).strength(0),i=r.e(e=>200-n(e.Budget)/80*200).strength(.03);e.force("y",a),e.force("x",t),e.force("r",i)},s=t(1),l=t(2);const d=async()=>{const e=`data/20${window.year}/fin_provision/fin_provision_eng_20${window.year}.csv`;return await r.a(e,e=>({Head:+e.Head,Programme:+e["Programme No."],"Programme Name":e["Programme Name"],Sector:e.Sector}))},u=(e,n,t)=>e.filter(e=>e.Head===n).filter(e=>e.Programme==t)[0];var m=e=>{let n=!0,t=s,a=null;const i=document.querySelector("#languageSwitch");i.addEventListener("change",o=>{n="chi"===i.options[i.selectedIndex].value,t=n?s:l,r.j("#head p").html(""),e.attr("stroke-width",0),n||d().then(e=>{a=e})});const o=r.j(".tooltip");e.on("mouseover",function(e){let t="";if(n)t=`${e["Programme Name"]}<br>${e.Sector}<br>${e.Budget} 百萬`;else{let n=u(a,e.Head,e.Programme);t=`${n["Programme Name"]}<br>${n.Sector}<br>${e.Budget} million`}o.html(t),o.style("visibility","visible")}).on("mousemove",()=>{o.style("top",`${r.b.pageY-10}px`).style("left",`${r.b.pageX+10}px`)}).on("mouseout",function(e){o.style("visibility","hidden")}).on("click",a=>{let i=a.Head;r.j("#head p").html(`${n?"總目： ":"Head: "}${t[i]}`),e.attr("stroke-width",0),e.each(function(e){e.Head===i&&r.j(this).attr("stroke","black").attr("stroke-width",3)})})};const p=(e,n,t)=>{const a=r.g(0).strength(.03),i=r.h(-100).strength(.03),o=r.f().force("x",a).force("y",i).force("collide",r.d(e=>n(e.Budget)+1));return o.nodes(e).on("tick",()=>{t.attr("cx",e=>e.x).attr("cy",e=>e.y)}),o},g=e=>{window.year=e,r.a(`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,n=>({Head:+n["總目"],Programme:+n["綱領編號"],"Programme Name":n["綱領"],Sector:n["機構"],Budget:+n[`20${e}-${e+1}`],id:`${+n["總目"]}-${n["綱領"]}-${n["機構"]}`})).then(e=>{e.columns=["Head","Programme","Programme Name","Sector","Budget"],(e=>{const n=0,t=30,i=1024-t-20,s=1400-n-30,l=(r.j(".chart-container").attr("width",1024).attr("height",1400),r.j("#canvas").attr("width",i).attr("height",s).attr("transform",`translate(${t}, ${n})`).append("g").attr("transform",`translate(${i/2}, 400)`)),d=r.c(e.map(e=>e.Budget)),u=r.i().domain(d).range([5,80]),g=l.selectAll(".artist").data(e,e=>e.id).enter().append("circle").attr("class","artist").attr("r",function(e){return u(e.Budget)}).attr("fill",function(e){return 0===e.Budget?"black":"rgba(200, 200, 200, 0.5)"});m(g);const v=p(e,u,g);document.querySelector("#sort").addEventListener("click",e=>{a(v,u)}),document.querySelector("#splitToGroup").addEventListener("click",n=>{o(e,v,u)}),document.querySelector("#combine").addEventListener("click",e=>{c(v,u)})})(e)})},v=async e=>{let n=await(async e=>{let n=`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,t=await r.a(n,n=>({Head:+n["總目"],Programme:+n["綱領編號"],"Programme Name":n["綱領"],Sector:n["機構"],Budget:+n[`20${e}-${e+1}`],id:`${+n["總目"]}-${n["綱領"]}-${n["機構"]}`}));return t.columns=["Head","Programme","Programme Name","Sector","Budget"],t})(e);const t=r.c(n.map(e=>e.Budget)),i=r.i().domain(t).range([5,80]);let s=r.j("#canvas").select("g").selectAll("circle").data(n,e=>e.id);s.exit().transition().duration(2e3).attr("fill","black").attr("r",0).remove(),s.enter().append("circle").attr("r",0).transition().duration(2e3).attr("r",function(e){return i(e.Budget)}).attr("fill","rgba(30, 30, 255, 0.5)").attr("class","artist").attr("class","newly-added");let l=r.j("#canvas").select("g").selectAll("circle");m(l);const d=p(n,i,l);document.querySelector("#sort").addEventListener("click",e=>{a(d,i)}),document.querySelector("#splitToGroup").addEventListener("click",e=>{o(n,d)}),document.querySelector("#combine").addEventListener("click",e=>{c(d,i)})};screen.width>=1023&&g(15);const f=document.querySelector("#yearOptions");f.addEventListener("change",()=>{let e=+f.options[f.selectedIndex].value;window.year=e,v(e),document.querySelector("#languageSwitch").value="chi",r.j("#head p").html("")})}]);