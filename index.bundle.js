!function(e){function t(t){for(var r,i,l=t[0],s=t[1],c=t[2],u=0,p=[];u<l.length;u++)i=l[u],a[i]&&p.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(d&&d(t);p.length;)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=s;o.push([1,1]),n()}([,function(e,t,n){"use strict";n.r(t);n(2);var r=n(0);const a=e=>{const t=r.i(".tooltip");e.on("mouseover",e=>{t.html(e["Programme Name"]),t.style("visibility","visible")}).on("mousemove",()=>{t.style("top",`${r.b.pageY-10}px`).style("left",`${r.b.pageX+10}px`)}).on("mouseout",()=>{t.style("visibility","hidden")})},o=(e,t,n)=>{const a=r.f(0).strength(.03),o=r.g(-100).strength(.03);r.e().force("x",a).force("y",o).force("collide",r.d(e=>t(e.Budget)+.5)).nodes(e).on("tick",()=>{n.attr("cx",e=>e.x).attr("cy",e=>e.y)})},i=e=>{r.a(`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,t=>({Head:+t["總目"],Programme:+t["綱領編號"],"Programme Name":t["綱領"],Sector:t["機構"],Budget:+t[`20${e}-${e+1}`],id:`${+t["總目"]}-${t["綱領"]}-${t["機構"]}`})).then(e=>{e.columns=["Head","Programme","Programme Name","Sector","Budget"],(e=>{const t=50,n=30,i=1024-n-20,l=800-t-30,s=(r.i(".chart-container").attr("width",1024).attr("height",800),r.i("#canvas").attr("width",i).attr("height",l).attr("transform",`translate(${n}, ${t})`).append("g").attr("transform",`translate(${i/2}, ${l/2})`)),c=r.c(e.map(e=>e.Budget)),d=r.h().domain(c).range([5,80]),u=s.selectAll(".artist").data(e,e=>e.id).enter().append("circle").attr("class","artist").attr("r",function(e){return d(e.Budget)}).attr("fill",function(e){return 0===e.Budget?"black":"rgba(200, 200, 200, 0.5)"});a(u),o(e,d,u)})(e)})},l=async e=>{let t=await(async e=>{let t=`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,n=await r.a(t,t=>({Head:+t["總目"],Programme:+t["綱領編號"],"Programme Name":t["綱領"],Sector:t["機構"],Budget:+t[`20${e}-${e+1}`],id:`${+t["總目"]}-${t["綱領"]}-${t["機構"]}`}));return n.columns=["Head","Programme","Programme Name","Sector","Budget"],n})(e);const n=r.c(t.map(e=>e.Budget)),i=r.h().domain(n).range([5,80]);let l=r.i("#canvas").select("g").selectAll("circle").data(t,e=>e.id);l.exit().transition().duration(2e3).attr("fill","black").attr("r",0).remove(),l.enter().append("circle").attr("r",0).transition().duration(2e3).attr("r",function(e){return i(e.Budget)}).attr("fill","rgba(30, 30, 255, 0.5)").attr("class","artist").attr("class","newly-added");let s=r.i("#canvas").select("g").selectAll(".newly-added");a(s);let c=r.i("#canvas").select("g").selectAll("circle");o(t,i,c)};screen.width>=1023&&i(18);const s=document.querySelector("#yearOptions");s.addEventListener("change",()=>{let e=+s.options[s.selectedIndex].value;l(e)})},function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,"* {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\n\n.tooltip{\n    position: absolute;\n    text-align: left;\n    z-index: 999;\n    visibility: hidden;\n    color: white;\n    padding: 9px;\n    background-color: rgba(0, 0, 0, 0.75);\n    border-radius: 6px;\n    font: 12px sans-serif;\n}\n\n.screen-size-reminder {\n    display: flex;\n    text-align: center;\n    justify-content: center;\n}\n.screen-size-reminder p{\n    flex:100%;\n    font-size: 17px;\n    color: white;\n    font-weight: 600;\n}\n\n.chart-container{\n    display: none;\n}\n\nbody{\n    background: linear-gradient(to bottom right, rgba(102, 153, 255, 0.5), rgba(102, 102, 255, 0.5))\n}\n\n@media only screen and (min-width: 1024px){\n    .screen-size-reminder {\n        display: none;\n    }\n    .chart-container{\n        display: block;\n    }\n    body{\n        background: none;\n    }\n}",""])}]);