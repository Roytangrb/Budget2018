!function(e){function t(t){for(var r,i,c=t[0],s=t[1],l=t[2],u=0,g=[];u<c.length;u++)i=c[u],o[i]&&g.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(d&&d(t);g.length;)g.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=s;a.push([6,1]),n()}([,function(e,t,n){var r=n(2);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"* {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\n\n.tooltip{\n    position: absolute;\n    text-align: left;\n    z-index: 999;\n    visibility: hidden;\n    color: white;\n    padding: 9px;\n    background-color: rgba(0, 0, 0, 0.75);\n    border-radius: 6px;\n    font: 12px sans-serif;\n}\n\n.screen-size-reminder {\n    display: flex;\n    text-align: center;\n    justify-content: center;\n}\n.screen-size-reminder p{\n    flex:100%;\n    font-size: 17px;\n    color: white;\n    font-weight: 600;\n}\n\n.chart-container, .chart-container h3{\n    display: none;\n}\n\n#toolbar {\n    display: none;\n    position: sticky;\n    top: 0;\n}\nbutton {\n    z-index: 1;\n}\n#legend{\n    float: right;\n    position: sticky;\n    top:0;\n    right: 50px;\n}\n#legend-des, #legend-item{\n    display: block;\n}\n\n#legend-item p, #legend-item span{\n    display: inline-block;\n}\n.legend-bubble{\n    width: 15px;\n    height: 15px;\n    border-radius: 50%\n}\n#legend-des{\n    color: rgba(200, 200, 200, 0.75);\n}\n#legend0{\n    background-color:rgba(200, 200, 200, 0.5)\n}\n#legend1{\n    background-color: rgba(30, 30, 255, 0.5)\n}\n#legend2{\n    background-color: rgb(0, 0, 0)\n}\n\nbody{\n    background: linear-gradient(to bottom right, rgba(102, 153, 255, 0.5), rgba(102, 102, 255, 0.5))\n}\n\n@media only screen and (min-width: 1024px){\n    .screen-size-reminder {\n        display: none;\n    }\n    .chart-container, .chart-container h3, #toolbar{\n        display: block;\n    }\n    body{\n        background: none;\n    }\n}",""])},,,,function(e,t,n){"use strict";n.r(t);n(1);var r=n(0);var o=(e,t)=>{const n=r.g(e=>t(e.Budget)<40?-250:250).strength(e=>t(e.Budget)<40?.01:.05),o=r.h().strength(e=>t(e.Budget)<40?.01:.05);e.force("y",o),e.force("x",n).alphaTarget(.3).restart()};const a=e=>{const t=[];return e.map(e=>{t.indexOf(e.Head)<0&&t.push(e.Head)}),t};var i=(e,t)=>{const n=a(e),o=r.g(e=>n.indexOf(e.Head)/10*110-450).strength(.06),i=r.h(e=>n.indexOf(e.Head)%10*100-350).strength(.06);t.force("y",i),t.force("x",o).alphaTarget(.6).restart()};var c=(e,t)=>{const n=r.g(0).strength(0),o=r.h(0).strength(0),a=r.e(e=>200-t(e.Budget)/80*200).strength(.03);e.force("y",o),e.force("x",n),e.force("r",a)};var s=e=>{const t=r.j(".tooltip");e.on("mouseover",e=>{t.html(`${e["Programme Name"]}<br>${e.Sector}<br>${e.Budget}百萬`),t.style("visibility","visible")}).on("mousemove",()=>{t.style("top",`${r.b.pageY-10}px`).style("left",`${r.b.pageX+10}px`)}).on("mouseout",()=>{t.style("visibility","hidden")}).on("click",t=>{let n=t.Head;e.attr("stroke-width",0),e.each(function(e){e.Head===n&&r.j(this).attr("stroke","black").attr("stroke-width",3)})})};const l=(e,t,n)=>{const o=r.g(0).strength(.03),a=r.h(-100).strength(.03),i=r.f().force("x",o).force("y",a).force("collide",r.d(e=>t(e.Budget)+1));return i.nodes(e).on("tick",()=>{n.attr("cx",e=>e.x).attr("cy",e=>e.y)}),i},d=e=>{r.a(`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,t=>({Head:+t["總目"],Programme:+t["綱領編號"],"Programme Name":t["綱領"],Sector:t["機構"],Budget:+t[`20${e}-${e+1}`],id:`${+t["總目"]}-${t["綱領"]}-${t["機構"]}`})).then(e=>{e.columns=["Head","Programme","Programme Name","Sector","Budget"],(e=>{const t=0,n=30,a=1024-n-20,d=1400-t-30,u=(r.j(".chart-container").attr("width",1024).attr("height",1400),r.j("#canvas").attr("width",a).attr("height",d).attr("transform",`translate(${n}, ${t})`).append("g").attr("transform",`translate(${a/2}, 400)`)),g=r.c(e.map(e=>e.Budget)),p=r.i().domain(g).range([5,80]),f=u.selectAll(".artist").data(e,e=>e.id).enter().append("circle").attr("class","artist").attr("r",function(e){return p(e.Budget)}).attr("fill",function(e){return 0===e.Budget?"black":"rgba(200, 200, 200, 0.5)"});s(f);const m=l(e,p,f);document.querySelector("#sort").addEventListener("click",e=>{o(m,p)}),document.querySelector("#splitToGroup").addEventListener("click",t=>{i(e,m,p)}),document.querySelector("#combine").addEventListener("click",e=>{c(m,p)})})(e)})},u=async e=>{let t=await(async e=>{let t=`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,n=await r.a(t,t=>({Head:+t["總目"],Programme:+t["綱領編號"],"Programme Name":t["綱領"],Sector:t["機構"],Budget:+t[`20${e}-${e+1}`],id:`${+t["總目"]}-${t["綱領"]}-${t["機構"]}`}));return n.columns=["Head","Programme","Programme Name","Sector","Budget"],n})(e);const n=r.c(t.map(e=>e.Budget)),a=r.i().domain(n).range([5,80]);let d=r.j("#canvas").select("g").selectAll("circle").data(t,e=>e.id);d.exit().transition().duration(2e3).attr("fill","black").attr("r",0).remove(),d.enter().append("circle").attr("r",0).transition().duration(2e3).attr("r",function(e){return a(e.Budget)}).attr("fill","rgba(30, 30, 255, 0.5)").attr("class","artist").attr("class","newly-added");let u=r.j("#canvas").select("g").selectAll("circle");s(u);const g=l(t,a,u);document.querySelector("#sort").addEventListener("click",e=>{o(g,a)}),document.querySelector("#splitToGroup").addEventListener("click",e=>{i(t,g)}),document.querySelector("#combine").addEventListener("click",e=>{c(g,a)})};screen.width>=1023&&d(18);const g=document.querySelector("#yearOptions");g.addEventListener("change",()=>{let e=+g.options[g.selectedIndex].value;u(e)})}]);