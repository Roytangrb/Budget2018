!function(e){function n(n){for(var r,i,c=n[0],s=n[1],l=n[2],u=0,g=[];u<c.length;u++)i=c[u],o[i]&&g.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(d&&d(n);g.length;)g.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,c=1;c<t.length;c++){var s=t[c];0!==o[s]&&(r=!1)}r&&(a.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},o={0:0},a=[];function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var d=s;a.push([7,1]),t()}([,function(e){e.exports={1:"應課稅品稅項",2:"一般差餉",3:"內部稅收",4:"車輛稅",5:"罰款、沒收及罰金",6:"專利稅及特權稅",7:"物業及投資",9:"貸款、償款、供款及其他收入",10:"公用事業",11:"各項收費",21:"行政長官辦公室",22:"漁農自然護理署",23:"醫療輔助隊",24:"審計署",25:"建築署",26:"政府統計處",27:"民眾安全服務處",28:"民航處",30:"懲教署",31:"香港海關",33:"土木工程拓展署",37:"衞生署",39:"渠務署",42:"機電工程署",44:"環境保護署",45:"消防處",46:"公務員一般開支",47:"政府總部：政府資訊科技總監辦公室",48:"政府化驗所",49:"食物環境衞生署",51:"政府產業署",53:"政府總部：民政事務局",55:"政府總部：商務及經濟發展局(通訊及創意產業科)",59:"政府物流服務署",60:"路政署",62:"房屋署",63:"民政事務總署",70:"入境事務處",72:"廉政公署",74:"政府新聞處",76:"稅務局",78:"知識產權署",79:"投資推廣署",80:"司法機構",82:"屋宇署",90:"勞工處",91:"地政總署",92:"律政司",94:"法律援助署",95:"康樂及文化事務署",96:"政府總部：海外經濟貿易辦事處",100:"海事處",106:"雜項服務",112:"立法會行政管理委員會",114:"申訴專員公署",116:"破產管理署",118:"規劃署",120:"退休金",121:"獨立監察警方處理投訴委員會",122:"香港警務處",135:"政府總部：創新及科技局",136:"公務員敍用委員會秘書處",137:"政府總部：環境局",138:"政府總部：發展局(規劃地政科)",139:"政府總部：食物及衞生局(食物科)",140:"政府總部：食物及衞生局(衞生科)",141:"政府總部：勞工及福利局",142:"政府總部：政務司司長辦公室及財政司司長辦公室",143:"政府總部：公務員事務局",144:"政府總部：政制及內地事務局",147:"政府總部：財經事務及庫務局(庫務科)",148:"政府總部：財經事務及庫務局(財經事務科)",151:"政府總部：保安局",152:"政府總部：商務及經濟發展局(工商及旅遊科)",155:"政府總部：創新科技署",156:"政府總部：教育局",158:"政府總部：運輸及房屋局(運輸科)",159:"政府總部：發展局(工務科)",160:"香港電台",162:"差餉物業估價署",163:"選舉事務處",166:"政府飛行服務隊",168:"香港天文台",169:"截取通訊及監察事務專員秘書處",170:"社會福利署",173:"在職家庭及學生資助事務處",174:"公務及司法人員薪俸及服務條件諮詢委員會聯合秘書處",180:"電影、報刊及物品管理辦事處",181:"工業貿易署",184:"轉撥各基金的款項",186:"運輸署",188:"庫務署",190:"大學教育資助委員會",194:"水務署",701:"土地徵用",702:"港口及機場發展",703:"建築物",704:"渠務",705:"土木工程",706:"公路",707:"新市鎮及市區發展",708:"非經常資助金及主要系統設備",709:"水務",710:"電腦化計劃",711:"房屋"}},function(e,n,t){var r=t(3);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t(5)(r,o);r.locals&&(e.exports=r.locals)},function(e,n,t){(e.exports=t(4)(!1)).push([e.i,"* {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\n\n.tooltip{\n    position: absolute;\n    text-align: left;\n    z-index: 999;\n    visibility: hidden;\n    color: white;\n    padding: 9px;\n    background-color: rgba(0, 0, 0, 0.75);\n    border-radius: 6px;\n    font: 12px sans-serif;\n}\n\n.screen-size-reminder {\n    display: flex;\n    text-align: center;\n    justify-content: center;\n}\n.screen-size-reminder p{\n    flex:100%;\n    font-size: 17px;\n    color: white;\n    font-weight: 600;\n}\n\n.chart-container, .chart-container h3{\n    display: none;\n}\n\n#head{\n    position:sticky;\n    top: 30px;\n    text-align: center\n}\n\n#toolbar {\n    display: none;\n    position: sticky;\n    top: 0;\n}\nbutton {\n    z-index: 1;\n}\n#legend{\n    float: right;\n    position: sticky;\n    top:0;\n    right: 50px;\n}\n#legend-des, #legend-item{\n    display: block;\n}\n\n#legend-item p, #legend-item span{\n    display: inline-block;\n}\n.legend-bubble{\n    width: 15px;\n    height: 15px;\n    border-radius: 50%\n}\n#legend-des{\n    color: rgba(200, 200, 200, 0.75);\n}\n#legend0{\n    background-color:rgba(200, 200, 200, 0.5)\n}\n#legend1{\n    background-color: rgba(30, 30, 255, 0.5)\n}\n#legend2{\n    background-color: rgb(0, 0, 0)\n}\n\nbody{\n    background: linear-gradient(to bottom right, rgba(102, 153, 255, 0.5), rgba(102, 102, 255, 0.5))\n}\n\n@media only screen and (min-width: 1024px){\n    .screen-size-reminder {\n        display: none;\n    }\n    .chart-container, .chart-container h3, #toolbar{\n        display: block;\n    }\n    body{\n        background: none;\n    }\n}",""])},,,,function(e,n,t){"use strict";t.r(n);t(2);var r=t(0);var o=(e,n)=>{const t=r.g(e=>n(e.Budget)<40?-250:250).strength(e=>n(e.Budget)<40?.01:.05),o=r.h().strength(e=>n(e.Budget)<40?.01:.05);e.force("y",o),e.force("x",t).alphaTarget(.3).restart()};const a=e=>{const n=[];return e.map(e=>{n.indexOf(e.Head)<0&&n.push(e.Head)}),n};var i=(e,n)=>{const t=a(e),o=r.g(e=>t.indexOf(e.Head)/10*110-450).strength(.06),i=r.h(e=>t.indexOf(e.Head)%10*100-350).strength(.06);n.force("y",i),n.force("x",o).alphaTarget(.6).restart()};var c=(e,n)=>{const t=r.g(0).strength(0),o=r.h(0).strength(0),a=r.e(e=>200-n(e.Budget)/80*200).strength(.03);e.force("y",o),e.force("x",t),e.force("r",a)},s=t(1);var l=e=>{const n=r.j(".tooltip");e.on("mouseover",function(e){n.html(`${e["Programme Name"]}<br>${e.Sector}<br>${e.Budget}百萬`),n.style("visibility","visible")}).on("mousemove",()=>{n.style("top",`${r.b.pageY-10}px`).style("left",`${r.b.pageX+10}px`)}).on("mouseout",function(e){n.style("visibility","hidden")}).on("click",n=>{let t=n.Head;r.j("#head p").html(`總目：${s[t]}`),e.attr("stroke-width",0),e.each(function(e){e.Head===t&&r.j(this).attr("stroke","black").attr("stroke-width",3)})})};const d=(e,n,t)=>{const o=r.g(0).strength(.03),a=r.h(-100).strength(.03),i=r.f().force("x",o).force("y",a).force("collide",r.d(e=>n(e.Budget)+1));return i.nodes(e).on("tick",()=>{t.attr("cx",e=>e.x).attr("cy",e=>e.y)}),i},u=e=>{r.a(`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,n=>({Head:+n["總目"],Programme:+n["綱領編號"],"Programme Name":n["綱領"],Sector:n["機構"],Budget:+n[`20${e}-${e+1}`],id:`${+n["總目"]}-${n["綱領"]}-${n["機構"]}`})).then(e=>{e.columns=["Head","Programme","Programme Name","Sector","Budget"],(e=>{const n=0,t=30,a=1024-t-20,s=1400-n-30,u=(r.j(".chart-container").attr("width",1024).attr("height",1400),r.j("#canvas").attr("width",a).attr("height",s).attr("transform",`translate(${t}, ${n})`).append("g").attr("transform",`translate(${a/2}, 400)`)),g=r.c(e.map(e=>e.Budget)),p=r.i().domain(g).range([5,80]),f=u.selectAll(".artist").data(e,e=>e.id).enter().append("circle").attr("class","artist").attr("r",function(e){return p(e.Budget)}).attr("fill",function(e){return 0===e.Budget?"black":"rgba(200, 200, 200, 0.5)"});l(f);const h=d(e,p,f);document.querySelector("#sort").addEventListener("click",e=>{o(h,p)}),document.querySelector("#splitToGroup").addEventListener("click",n=>{i(e,h,p)}),document.querySelector("#combine").addEventListener("click",e=>{c(h,p)})})(e)})},g=async e=>{let n=await(async e=>{let n=`data/20${e}/fin_provision/fin_provision_chi_20${e}.csv`,t=await r.a(n,n=>({Head:+n["總目"],Programme:+n["綱領編號"],"Programme Name":n["綱領"],Sector:n["機構"],Budget:+n[`20${e}-${e+1}`],id:`${+n["總目"]}-${n["綱領"]}-${n["機構"]}`}));return t.columns=["Head","Programme","Programme Name","Sector","Budget"],t})(e);const t=r.c(n.map(e=>e.Budget)),a=r.i().domain(t).range([5,80]);let s=r.j("#canvas").select("g").selectAll("circle").data(n,e=>e.id);s.exit().transition().duration(2e3).attr("fill","black").attr("r",0).remove(),s.enter().append("circle").attr("r",0).transition().duration(2e3).attr("r",function(e){return a(e.Budget)}).attr("fill","rgba(30, 30, 255, 0.5)").attr("class","artist").attr("class","newly-added");let u=r.j("#canvas").select("g").selectAll("circle");l(u);const g=d(n,a,u);document.querySelector("#sort").addEventListener("click",e=>{o(g,a)}),document.querySelector("#splitToGroup").addEventListener("click",e=>{i(n,g)}),document.querySelector("#combine").addEventListener("click",e=>{c(g,a)})};screen.width>=1023&&u(15);const p=document.querySelector("#yearOptions");p.addEventListener("change",()=>{let e=+p.options[p.selectedIndex].value;g(e)})}]);